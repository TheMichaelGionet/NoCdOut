NoCdOut: A 4X space simulator on a NoC
=======================

# Setup
## Install Chisel
Follow these instructions https://www.chisel-lang.org/docs/installation

Alternatively, pull this docker container which already has chisel setup in it: 
```bash
docker pull themichaelgionet/zhw_container2
```
## Pull this repo

Congrats, you're setup now.

# Run

## Quickstart:

Navigate to the top most directory and do
```bash
sbt test
```

This should pull anything needed by scala, followed by running the test files. The game's output is generated by one of these test files. It is expected that a grid of ascii text will be drawn. 

Each cell in the grid is represented by 4 ascii characters, broken further down into 3 characters to denote what is going on in the PE, and 1 character on the right of those to denote what is going on in the NoC switch. Notation for PEs is as follows:
```
(01
```
Denotes a planet with index 01. 
```
 . 
```
Denotes empty space.
```
{01
```
Still denotes a planet, but it has a ship in the atmosphere trying to leave
```
(> 
```
Is also a planet, but it has a ship in it's garrison (storage).

For empty space, 
```
>. 
```
Denotes that a fleet will begin inspecting it, and
```
 .>
```
Denotes that a fleet is done inspection and wants to go back into the NoC.


Next to each of those is one of:
```
 
```
```
v
```
```
X
```
```
#
```

Which respectively refers to "nothing is being routed", "one fleet is being routed", "multiple fleets are being routed", and "fleets are fighting"

## How to Play:

in the file /NoCdOut/src/main/scala/NoCdOut/levelbuild.scala, there is a list of generals commented out that you can select to play against a set of enemy generals. Uncomment the general that you want to assign to each planet and in a terminal, do
```bash
sbt test
```
while in the top most /NoCdOut/ directory. 


# Infoz

## How It Works:

### The NoC:
The NoC topology is a bidirectional mesh, which was chosen because it can best represent space. 



TODO: Ryan


### Planets/PEs:
Every planet has 3 main things:
- Resources
- Turrets
- A General

A General will take information that is available to them, like how many resources the planet has, how healthy the turrets are, what fleet entered the planet's atmosphere, and any information retreived by scouts. 

The General will use that information to make a decision about whether or not to buy a new fleet, which fleet type, where to route fleets, or when and by how much to strengthen the planet's turret. 

In the code, a General just outputs those decisions, and the relevant handler will make it happen. A planet as a module has the following submodules:
- ShipEventHandler: Given a fleet that was routed to the planet, reroute to where the general decides given that the general owns it, routes it back to the source if it is friendly or an enemy scout, or decide to damage the planet if it's hostile.
- CombatHandler: If the fleet is hostile (and not a scout), compute how much damage is done to the planet's turret and if it's enough to take over the planet. Factor in turret hp regeneration.
- EconomyHandler: If a General wants to buy a fleet or strengthen turret defences, compute whether or not it can do this and what the resources (==space dollars) are left afterwards.
- GeneralMux: This just multiplexes the controls between the friendly General, enemy General, or no General based on who owned the planet.


Empty Space is also a module that occupies wherever a planet does not. The logic for these is much simpler and amounts to "any ship that gets routed here will just be routed back where it came from".

### Ship Classes:
Ships are divided into:
- Scouts (have the special property that they can retrieve information and bring it back to a general)
- Basic (baseline attack/defence, cheap)
- Attack (higher damage per hit point ratio)
- Defence (lower damage but high hp)
- Beefer (balanced between attack and defence)
- Destroyer (high attack and high defence, expensive)

### Some Generals:
To give a high level description of each general:
- Oobleck will either focus on exploration and exploitation or combat and defence at any given time
- Bush Man Mike is a wildcard that prefers exploiting resources and defence
- Space Man Mike prefers to exploration and exploitation over combat
- Da Borg prefers combat
- William prefers defence but when engaged is brutal
- Onion prefers to try to conquor new planets and fortifying its own defences
- Greg prefers pure combat
- Skippy does not do combat, but does create a cloud of defensive ships around his planet

## Work Division (for ECE720)

### Michael:
- Generals:
    - General Abstract Module
    - Parametrized General
    - A few generals that instantiate the parametrized general
- Planets:
    - Ship Event Handler
    - Combat Handler (the planet side version)
    - Economy Handler
- Level Builder Module
- Level Builder + NoC Integration

### Ryan:
- Made the NoC:
    - Switch
    - Combat Unit
    - TODO: Fill this in


# Disclaimer:
This is a work of fiction. Names, characters, events, and incidents are purely the products of the developers' imagination. Any resemblance to actual persons, living or dead, or actual events is purely coincidental.



